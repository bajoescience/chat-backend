"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[967],{4453:function(t,e,r){r.d(e,{S:function(){return a}});var n=r(7205),i=r(277),o=r(184),a=function(t){var e=(0,i.ZP)(n.Z)((function(t){t.theme;return{borderRadius:"30px",backgroundColor:"white",color:"gray","&:hover":{backgroundColor:"white"}}}));return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(e,{variant:t.variant,href:t.href,target:t.target,sx:t.sx,disableElevation:t.disableElevation,children:t.children})})};e.Z=function(t){return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(n.Z,{type:t.type,fullWidth:!!t.fullWidth||null,variant:t.variant||"contained",sx:t.sx||{mt:2,mb:3},children:t.children})})}},7649:function(t,e,r){var n=r(3978),i=r(184);e.Z=function(t){var e=t.person;return e.avatar?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Z,{alt:e.firstName,src:e.img})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.Z,{sx:{backgroundColor:e.backgroundColor||function(t){var e,r="".concat(t.firstName," ").concat(t.lastName),n=0;for(e=0;e<r.length;e+=1)n=r.charCodeAt(e)+((n<<5)-n);var i="#";for(e=0;e<3;e+=1){i+="00".concat((n>>8*e&255).toString(16)).slice(-2)}return i}(e)},children:function(t){for(var e="".concat(t.firstName," ").concat(t.lastName),r="",n=0;n<e.length;n+=1)0===n?r=r.concat(e[n].toUpperCase()):" "===e[n]&&" "!==e[n+1]&&(r=r.concat(e[n+1].toUpperCase()));return r}(e)})})}},6967:function(t,e,r){r.r(e),r.d(e,{default:function(){return _}});var n=r(885),i=r(228),o=r(5953),a=r(2791),c=r(7689),s=r(4165),l=r(5861),d=r(8748),u=r(4162),h=r(1413),f=r(277),v=r(286),p=r(4565),x=r(3366),m=r(7462),g=r(8182),Z=r(4419),b=r(2065),w=r(5513),j=r(7164),k=r(184),y=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],S=(0,f.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(t,e){var r=t.ownerState;return[e.root,r.absolute&&e.absolute,e[r.variant],r.light&&e.light,"vertical"===r.orientation&&e.vertical,r.flexItem&&e.flexItem,r.children&&e.withChildren,r.children&&"vertical"===r.orientation&&e.withChildrenVertical,"right"===r.textAlign&&"vertical"!==r.orientation&&e.textAlignRight,"left"===r.textAlign&&"vertical"!==r.orientation&&e.textAlignLeft]}})((function(t){var e=t.theme,r=t.ownerState;return(0,m.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},r.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},r.light&&{borderColor:e.vars?"rgba(".concat(e.vars.palette.dividerChannel," / 0.08)"):(0,b.Fq)(e.palette.divider,.08)},"inset"===r.variant&&{marginLeft:72},"middle"===r.variant&&"horizontal"===r.orientation&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},"middle"===r.variant&&"vertical"===r.orientation&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},"vertical"===r.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},r.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(t){var e=t.theme,r=t.ownerState;return(0,m.Z)({},r.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat((e.vars||e).palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(t){var e=t.theme,r=t.ownerState;return(0,m.Z)({},r.children&&"vertical"===r.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat((e.vars||e).palette.divider),transform:"translateX(0%)"}})}),(function(t){var e=t.ownerState;return(0,m.Z)({},"right"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===e.textAlign&&"vertical"!==e.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),C=(0,f.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(t,e){var r=t.ownerState;return[e.wrapper,"vertical"===r.orientation&&e.wrapperVertical]}})((function(t){var e=t.theme,r=t.ownerState;return(0,m.Z)({display:"inline-block",paddingLeft:"calc(".concat(e.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(e.spacing(1)," * 1.2)")},"vertical"===r.orientation&&{paddingTop:"calc(".concat(e.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(e.spacing(1)," * 1.2)")})})),R=a.forwardRef((function(t,e){var r=(0,w.Z)({props:t,name:"MuiDivider"}),n=r.absolute,i=void 0!==n&&n,o=r.children,a=r.className,c=r.component,s=void 0===c?o?"div":"hr":c,l=r.flexItem,d=void 0!==l&&l,u=r.light,h=void 0!==u&&u,f=r.orientation,v=void 0===f?"horizontal":f,p=r.role,b=void 0===p?"hr"!==s?"separator":void 0:p,R=r.textAlign,A=void 0===R?"center":R,N=r.variant,F=void 0===N?"fullWidth":N,I=(0,x.Z)(r,y),P=(0,m.Z)({},r,{absolute:i,component:s,flexItem:d,light:h,orientation:v,role:b,textAlign:A,variant:F}),B=function(t){var e=t.absolute,r=t.children,n=t.classes,i=t.flexItem,o=t.light,a=t.orientation,c=t.textAlign,s={root:["root",e&&"absolute",t.variant,o&&"light","vertical"===a&&"vertical",i&&"flexItem",r&&"withChildren",r&&"vertical"===a&&"withChildrenVertical","right"===c&&"vertical"!==a&&"textAlignRight","left"===c&&"vertical"!==a&&"textAlignLeft"],wrapper:["wrapper","vertical"===a&&"wrapperVertical"]};return(0,Z.Z)(s,j.V,n)}(P);return(0,k.jsx)(S,(0,m.Z)({as:s,className:(0,g.Z)(B.root,a),role:b,ref:e,ownerState:P},I,{children:o?(0,k.jsx)(C,{className:B.wrapper,ownerState:P,children:o}):null}))})),A=r(7649),N=(r(1001),r(2388)),F="/api/notif",I=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e,r){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.Z.get("".concat(F,"/check"),{params:{sender:e,receiver:r}});case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),P=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(){var e;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.Z.get(F);case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.Z.post(F,e);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),W=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e,r){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.Z.put("".concat(F,"/").concat(e),r);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),M=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(e){var r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N.Z.delete(F+"/"+e);case 2:return r=t.sent,t.abrupt("return",r.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E={getAll:P,create:B,update:W,remove:M,checkNotif:I},L=function(t){var e=t.contact,r=t.id,o=(0,c.s0)(),d=(0,a.useState)(null),u=(0,n.Z)(d,2),x=u[0],m=u[1];(0,a.useEffect)((function(){var t=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(){var n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.checkNotif(e.id,r);case 2:n=t.sent,m(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[r,e]);var g=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(n){var i,a,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("keydown"!==n.type){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,E.checkNotif(e.id,r);case 4:if(!(i=t.sent)||0===i.count){t.next=11;break}return a=(0,h.Z)((0,h.Z)({},i),{},{count:0}),t.next=9,E.update(i.id,a);case 9:c=t.sent,m(c);case 11:o("/chat/room/".concat(r,"/").concat(e.id));case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=(0,f.ZP)(v.Z)((function(t){return{"&:hover":{boxShadow:t.theme.shadows[24]}}}));return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(Z,{elevation:0,onClick:g,sx:{display:"flex",flexDirection:"row",flexWrap:"nowrap",height:{xs:"20vh",md:"13vh",lg:"16vh"},p:2,alignItems:"center",borderRadius:3},children:[(0,k.jsxs)(i.Z,{sx:{pr:2,display:"flex"},children:[(0,k.jsx)(i.Z,{children:(0,k.jsx)(A.Z,{person:e})}),(null===x||void 0===x?void 0:x.count)>0&&(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(i.Z,{sx:{height:30}}),(0,k.jsx)(i.Z,{sx:{height:15,width:15,backgroundColor:"lightgreen",borderRadius:10,border:"1px solid white",bottom:"5%",ml:-2,position:"relative",left:0,right:0}})]})]}),(0,k.jsxs)(i.Z,{sx:{flexGrow:1},children:[(0,k.jsx)(i.Z,{children:(0,k.jsx)(p.Z,{fontWeight:"bold",fontSize:17,fontFamily:"Arial, sans-serif",children:function(){var t=e.firstName,r=e.lastName;return"".concat(t," ").concat(r)}()})}),(0,k.jsx)(i.Z,{children:(0,k.jsx)(p.Z,{mb:1,color:"GrayText",fontSize:13,sx:{mt:1},children:Boolean(null===x||void 0===x?void 0:x.message)?null===x||void 0===x?void 0:x.message:"No message yet :)"})})]}),(0,k.jsxs)(i.Z,{children:[(0,k.jsx)(i.Z,{children:(0,k.jsx)(p.Z,{fontWeight:"lighter",fontFamily:"Arial, sans-serif",children:null===x||void 0===x?void 0:x.date})}),(0,k.jsx)(i.Z,{height:32,children:(null===x||void 0===x?void 0:x.count)>0&&(0,k.jsx)(i.Z,{fontFamily:"Arial, sans-serif",sx:{backgroundColor:"lightsalmon",color:"white",width:25,ml:2,textAlign:"center",border:"1px solid lightsalmon",borderRadius:15,mt:1},children:null===x||void 0===x?void 0:x.count})})]})]}),(0,k.jsx)(R,{sx:{display:{xs:"",md:""}}})]})},H=function(t){var e=t.onClick,r=t.contacts,n=t.id;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(u.Z,{id:"chatlist",sx:{backgroundColor:"white",maxHeight:{xs:"fit-content",md:"80vh"},minHeight:"20vh",overflow:{xs:"visible",md:"auto"},borderRadius:4,borderTopRightRadius:2,borderBottomRightRadius:2,p:2},children:(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r?void 0:r.map((function(t){return(0,k.jsx)(L,{contact:t,onClick:e,id:n},t.id)})):(0,k.jsx)(i.Z,{sx:{mr:4,textAlign:"center"},children:"Sorry no match was found :/"})})})},T=function(t){var e=t.onClick,r=t.contacts,n=t.id;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(v.Z,{elevation:6,sx:{backgroundColor:"white",minHeight:"20vh",maxHeight:{xs:"fit-content",md:"70vh",lg:"80vh"},overflow:{xs:"visible",md:"auto"},borderRadius:4,borderTopRightRadius:2,borderBottomRightRadius:2,p:2,m:1,ml:{xs:0,md:-5},mb:{xs:2,md:5}},children:(0,k.jsx)(u.Z,{spacing:1,children:(null===r||void 0===r?void 0:r.length)>0?null===r||void 0===r?void 0:r.map((function(t){return(0,k.jsx)(L,{contact:t,onClick:e,id:n},t.id)})):(0,k.jsx)(i.Z,{sx:{mr:4,textAlign:"center"},children:"Sorry no match was found :/"})})})})},z=function(t){var e=t.contacts,r=t.userState.user,i=(0,a.useState)([]),o=(0,n.Z)(i,2),c=o[0],u=o[1],h=(0,a.useState)([]),f=(0,n.Z)(h,2),v=f[0],p=f[1];return(0,a.useEffect)((function(){var t=function(){var t=(0,l.Z)((0,s.Z)().mark((function t(){var n,i;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.Z.getUser(r.id);case 2:n=t.sent,i=n.notif.map((function(t){if(t.count>0&&t.receiver===r.id)return t.sender})),u(e.filter((function(t){return i.includes(t.id)}))),p(e.filter((function(t){return!i.includes(t.id)})));case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[r,e]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(H,{contacts:c,id:r.id}),(0,k.jsx)(T,{contacts:v,id:r.id})]})},D=r(4453),U=r(8875),V=r(8254),G=r(5403),O=(0,f.ZP)(U.Z)((function(t){t.theme;return{"& .MuiInputBase-root":{borderRadius:"50px"},"& .MuiOutlinedInput-root":{backgroundColor:"white",fontFamily:"sans-serif",color:"black","& fieldset":{borderColor:"white"},"&:hover fieldset":{borderColor:"white"},"&.Mui-focused fieldset":{borderColor:"white"}}}})),$=function(t){return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(O,{variant:"outlined",onChange:t.handleSearch,placeholder:"SEARCH",fullWidth:!0,InputProps:{startAdornment:(0,k.jsx)(V.Z,{position:"start",children:(0,k.jsx)(G.Z,{})})}})})},q=r(7205),X=(0,r(1245).Z)((0,k.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBack"),Y=function(){var t=(0,c.s0)();return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(q.Z,{onClick:function(){t(".")},disableElevation:!0,startIcon:(0,k.jsx)(X,{}),sx:{mt:1,color:"gray"},children:"Back"})})},_=function(){var t=(0,c.bx)(),e=t.contactState,r=t.userState,s=e.contacts,l=(0,c.bS)("/chat/room/:userId/:contactId"),d=(0,a.useState)(s),u=(0,n.Z)(d,2),h=u[0],f=u[1];return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(i.Z,{sx:{p:2,flexGrow:1},children:(0,k.jsxs)(o.ZP,{container:!0,spacing:2,children:[(0,k.jsxs)(o.ZP,{item:!0,xs:8,sm:4,children:[(0,k.jsx)(i.Z,{display:{xs:l?"none":"block",md:"block"},children:(0,k.jsx)($,{handleSearch:function(t){var e=t.target.value;f(s.filter((function(t){return"".concat(t.firstName," ").concat(t.lastName).toUpperCase().includes(e.toUpperCase())})))}})}),(0,k.jsx)(i.Z,{display:{xs:l?"block":"none",md:"none"},children:(0,k.jsx)(Y,{})})]}),(0,k.jsx)(o.ZP,{item:!0,xs:4,sm:8,children:(0,k.jsx)(D.S,{href:"https://youtu.be/SHRAEqxoN0c",target:"_blank",variant:"contained",sx:{float:"right",mt:1},disableElevation:!0,children:"More"})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,md:5,lg:4,sx:{display:{xs:l?"none":"block",md:"block"}},children:(0,k.jsx)(z,{contacts:h,userState:r})}),(0,k.jsx)(o.ZP,{item:!0,xs:12,md:7,lg:8,sx:{display:{xs:l?"block":"none",md:"block"}},children:(0,k.jsx)(c.j3,{context:t})})]})})})}},5403:function(t,e,r){var n=r(4836);e.Z=void 0;var i=n(r(5649)),o=r(184),a=(0,i.default)((0,o.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search");e.Z=a},4162:function(t,e,r){var n=r(4942),i=r(3366),o=r(7462),a=r(2791),c=r(1184),s=r(5682),l=r(8519),d=r(2466),u=r(277),h=r(5513),f=r(184),v=["component","direction","spacing","divider","children"];function p(t,e){var r=a.Children.toArray(t).filter(Boolean);return r.reduce((function(t,n,i){return t.push(n),i<r.length-1&&t.push(a.cloneElement(e,{key:"separator-".concat(i)})),t}),[])}var x=(0,u.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(t,e){return[e.root]}})((function(t){var e=t.ownerState,r=t.theme,i=(0,o.Z)({display:"flex",flexDirection:"column"},(0,c.k9)({theme:r},(0,c.P$)({values:e.direction,breakpoints:r.breakpoints.values}),(function(t){return{flexDirection:t}})));if(e.spacing){var a=(0,s.hB)(r),l=Object.keys(r.breakpoints.values).reduce((function(t,r){return("object"===typeof e.spacing&&null!=e.spacing[r]||"object"===typeof e.direction&&null!=e.direction[r])&&(t[r]=!0),t}),{}),u=(0,c.P$)({values:e.direction,base:l}),h=(0,c.P$)({values:e.spacing,base:l});"object"===typeof u&&Object.keys(u).forEach((function(t,e,r){if(!u[t]){var n=e>0?u[r[e-1]]:"column";u[t]=n}}));i=(0,d.Z)(i,(0,c.k9)({theme:r},h,(function(t,r){return{"& > :not(style) + :not(style)":(0,n.Z)({margin:0},"margin".concat((i=r?u[r]:e.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[i])),(0,s.NA)(a,t))};var i})))}return i=(0,c.dt)(r.breakpoints,i)})),m=a.forwardRef((function(t,e){var r=(0,h.Z)({props:t,name:"MuiStack"}),n=(0,l.Z)(r),a=n.component,c=void 0===a?"div":a,s=n.direction,d=void 0===s?"column":s,u=n.spacing,m=void 0===u?0:u,g=n.divider,Z=n.children,b=(0,i.Z)(n,v),w={direction:d,spacing:m};return(0,f.jsx)(x,(0,o.Z)({as:c,ownerState:w,ref:e},b,{children:g?p(Z,g):Z}))}));e.Z=m}}]);
//# sourceMappingURL=967.5dfd7f8b.chunk.js.map